// Updated index.html file for WebSocket Client with Session Initialization, Auto-Ping, and Message Display
// Place this file in the 'public' folder

<!DOCTYPE html>
<html>

<head>
    <title>WebSocket Client</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        #output {
            border: 1px solid #ccc;
            padding: 10px;
            height: 200px;
            overflow-y: scroll;
        }
    </style>
</head>

<body>
    <h1>WebSocket Client</h1>
    <button onclick="connectWebSocket()">Connect</button>
    <div id="output"></div>

    <script>
        let socket;

        async function connectWebSocket() {
            socket = new WebSocket(`ws://poc--websocket-test-public-alb-1998840662.ap-southeast-1.elb.amazonaws.com`);

            socket.onopen = () => {
                logMessage('WebSocket Connected');
                startPing();
            };

            socket.onmessage = (event) => {
                logMessage(`Received: ${event.data}`);
            };

            socket.onclose = () => {
                logMessage('WebSocket Disconnected');
            };
        }

        function startPing() {
            setInterval(() => {
                if (socket && socket.readyState === WebSocket.OPEN) {
                    socket.send('ping');
                    logMessage('Sent: ping');
                }
            }, 15000);
        }

        function logMessage(message) {
            const output = document.getElementById('output');
            output.innerHTML += message + '<br>';
            output.scrollTop = output.scrollHeight;
        }
    </script>
</body>

</html>